<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Loja</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-50">

<header class="p-4 text-center border-b relative">
  <h1 id="storeName" class="text-2xl font-serif">Minha Loja</h1>

  <a href="../cart.html"
     class="absolute top-4 right-4 text-sm">
    ðŸ›’ Carrinho (<span id="cartCount">0</span>)
  </a>
</header>

<main class="max-w-4xl mx-auto p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"
      id="productList"></main>

<script>
const storeName = localStorage.getItem("storeName") || "Minha Loja";
document.getElementById("storeName").innerText = storeName;

const products = JSON.parse(localStorage.getItem("products")) || [];
const cart = JSON.parse(localStorage.getItem("cart")) || [];

document.getElementById("cartCount").innerText =
  cart.reduce((a, b) => a + b.qty, 0);

const list = document.getElementById("productList");

products.forEach(p => {
  const card = document.createElement("div");
  card.className = "border bg-white p-4 text-center space-y-2";

  card.innerHTML = `
    <img src="${p.image}" class="w-full h-40 object-contain" />
    <h3 class="font-medium">${p.name}</h3>
    <p class="text-sm text-gray-500">R$ ${p.price}</p>
    <button class="bg-black text-white px-4 py-2 text-sm"
      onclick="addToCart('${p.id}')">
      Adicionar
    </button>
  `;
  list.appendChild(card);
});

function addToCart(id) {
  const product = products.find(p => p.id === id);
  const item = cart.find(i => i.id === id);

  if (item) {
    item.qty++;
  } else {
    cart.push({ ...product, qty: 1 });
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  location.reload();
}
</script>

</body>
</html>

