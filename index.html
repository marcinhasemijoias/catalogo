<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Marcinha Semijoias</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- ÍCONES -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Georgia, serif;
  background:#faf7f2;
  color:#333;
}
header{
  padding:30px;
  text-align:center;
  border-bottom:1px solid #d6b48c;
}
header h1{
  margin:0;
  font-weight:normal;
  letter-spacing:2px;
}
.produtos{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:30px;
  padding:40px;
  max-width:1200px;
  margin:auto;
}
.card{
  background:#fff;
  border-radius:8px;
  overflow:hidden;
  box-shadow:0 5px 15px rgba(0,0,0,.08);
  display:flex;
  flex-direction:column;
}
.card img{
  width:100%;
  height:260px;
  object-fit:cover;
}
.card .info{
  padding:20px;
  flex:1;
}
.card h3{
  margin:0 0 10px;
  font-weight:normal;
}
.preco{
  font-size:18px;
}
.pix{
  margin-top:8px;
  color:#27ae60;
  font-size:15px;
}
.parcelado{
  margin-top:6px;
  font-size:14px;
  color:#555;
}
.parcelado i, .pix i{
  margin-right:6px;
  color:#b48b5a;
}
.card button{
  border:none;
  padding:15px;
  background:#b48b5a;
  color:#fff;
  font-size:14px;
  cursor:pointer;
}
.card button:hover{ opacity:.9 }

#cart{
  position:fixed;
  right:20px;
  bottom:20px;
  background:#b48b5a;
  color:#fff;
  padding:14px 20px;
  border-radius:40px;
  cursor:pointer;
  box-shadow:0 10px 20px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<header>
  <h1>Marcinha Semijoias</h1>
</header>

<section class="produtos" id="produtos"></section>

<div id="cart" onclick="finalizarWhats()">
  <i class="fa-brands fa-whatsapp"></i> Finalizar Pedido
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
import { getFirestore, collection, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_DOMINIO.firebaseapp.com",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_BUCKET.appspot.com",
  messagingSenderId: "SEU_SENDER_ID",
  appId: "SEU_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let carrinho = [];
let config = { descontoPix: 0, whatsapp: "" };

async function carregarConfig(){
  const snap = await getDoc(doc(db,"config","loja"));
  if(snap.exists()) config = snap.data();
}

async function carregarProdutos(){
  const snap = await getDocs(collection(db,"produtos"));
  produtos.innerHTML = "";
  snap.forEach(d=>{
    const p = d.data();
    const pix = p.preco - (p.preco * (config.descontoPix/100));
    const parcela = (p.preco / 3).toFixed(2);

    produtos.innerHTML += `
      <div class="card">
        <img src="${p.imagem}">
        <div class="info">
          <h3>${p.nome}</h3>
          <div class="preco">R$ ${p.preco.toFixed(2)}</div>
          <div class="pix"><i class="fa-solid fa-qrcode"></i> PIX: R$ ${pix.toFixed(2)}</div>
          <div class="parcelado"><i class="fa-solid fa-credit-card"></i> 3x de R$ ${parcela}</div>
        </div>
        <button onclick='addCarrinho("${p.nome}",${pix})'>Adicionar</button>
      </div>
    `;
  });
}

window.addCarrinho = function(nome, valor){
  carrinho.push({ nome, valor });
  alert("Produto adicionado!");
}

window.finalizarWhats = function(){
  if(carrinho.length === 0) return alert("Carrinho vazio");

  let msg = "✨ *Pedido Marcinha Semijoias* ✨%0A%0A";
  let total = 0;

  carrinho.forEach(p=>{
    msg += `• ${p.nome} — R$ ${p.valor.toFixed(2)}%0A`;
    total += p.valor;
  });

  msg += `%0A*Total PIX:* R$ ${total.toFixed(2)}`;

  window.open(`https://wa.me/${config.whatsapp}?text=${msg}`,"_blank");
}

await carregarConfig();
await carregarProdutos();
</script>

</body>
</html>
