<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin | Gestão Boutique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-[#FDFBF7] text-[#111111] min-h-screen">

    <nav class="border-b border-[#E5E1DB] bg-white px-6 py-4 flex justify-between items-center">
        <h1 class="font-serif text-xl tracking-tighter uppercase">Painel <span class="text-[#A68966]">Boutique</span></h1>
        <a href="../catalogo/loja/index.html" target="_blank" class="text-xs tracking-widest uppercase border border-[#111111] px-4 py-2 hover:bg-[#111111] hover:text-white transition">Ver Loja</a>
    </nav>

    <div class="max-w-4xl mx-auto p-6 space-y-12">
        
        <section class="space-y-6">
            <h2 class="font-serif text-2xl border-b border-[#A68966] pb-2 inline-block">Configurações da Marca</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-xs uppercase tracking-widest text-[#8C857B] mb-2">Nome da Loja</label>
                    <input type="text" id="storeName" class="w-full bg-white border border-[#E5E1DB] p-3 focus:outline-none focus:border-[#A68966]" placeholder="Ex: Joalheria Real">
                </div>
                <div>
                    <label class="block text-xs uppercase tracking-widest text-[#8C857B] mb-2">WhatsApp (com DDD)</label>
                    <input type="number" id="whatsapp" class="w-full bg-white border border-[#E5E1DB] p-3 focus:outline-none focus:border-[#A68966]" placeholder="5511999999999">
                </div>
                <div>
                    <label class="block text-xs uppercase tracking-widest text-[#8C857B] mb-2">Desconto PIX (%)</label>
                    <input type="number" id="pixDiscount" class="w-full bg-white border border-[#E5E1DB] p-3 focus:outline-none focus:border-[#A68966]" placeholder="Ex: 10">
                </div>
                <div>
                    <label class="block text-xs uppercase tracking-widest text-[#8C857B] mb-2">Parcelamento Máx.</label>
                    <input type="number" id="maxInstallments" class="w-full bg-white border border-[#E5E1DB] p-3 focus:outline-none focus:border-[#A68966]" placeholder="Ex: 3">
                </div>
            </div>
            <button onclick="saveSettings()" class="bg-[#111111] text-white text-xs tracking-[0.2em] uppercase w-full py-4 hover:bg-[#222] transition">Salvar Identidade</button>
        </section>

        <hr class="border-[#E5E1DB]">

        <section class="space-y-6">
            <h2 class="font-serif text-2xl border-b border-[#A68966] pb-2 inline-block">Novo Produto</h2>
            <div class="bg-white border border-[#E5E1DB] p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="pName" placeholder="Nome do Produto" class="w-full border-b border-[#E5E1DB] py-2 focus:outline-none focus:border-[#A68966]">
                    <input type="number" id="pPrice" placeholder="Preço (Ex: 189.90)" class="w-full border-b border-[#E5E1DB] py-2 focus:outline-none focus:border-[#A68966]">
                </div>
                
                <div class="space-y-2">
                    <label class="block text-xs uppercase tracking-widest text-[#8C857B]">Foto do Produto (Upload)</label>
                    <input type="file" id="pImage" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:border-0 file:text-xs file:font-semibold file:bg-[#FDFBF7] file:text-[#A68966] hover:file:bg-[#E5E1DB]">
                </div>

                <button onclick="addProduct()" class="w-full border border-[#111111] text-[#111111] text-xs tracking-[0.2em] uppercase py-3 hover:bg-[#111111] hover:text-white transition">Cadastrar no Catálogo</button>
            </div>
        </section>

        <section class="space-y-6">
            <h2 class="font-serif text-2xl border-b border-[#A68966] pb-2 inline-block">Estoque Atual</h2>
            <div id="productList" class="grid gap-4">
                </div>
        </section>
    </div>

    <script>
        // Carregar dados iniciais
        document.getElementById('storeName').value = localStorage.getItem('storeName') || '';
        document.getElementById('whatsapp').value = localStorage.getItem('whatsapp') || '';
        document.getElementById('pixDiscount').value = localStorage.getItem('pixDiscount') || '';
        document.getElementById('maxInstallments').value = localStorage.getItem('maxInstallments') || '';

        function saveSettings() {
            localStorage.setItem('storeName', document.getElementById('storeName').value);
            localStorage.setItem('whatsapp', document.getElementById('whatsapp').value);
            localStorage.setItem('pixDiscount', document.getElementById('pixDiscount').value);
            localStorage.setItem('maxInstallments', document.getElementById('maxInstallments').value);
            alert("Configurações atualizadas com sucesso!");
        }

        function addProduct() {
            const name = document.getElementById('pName').value;
            const price = document.getElementById('pPrice').value;
            const imageFile = document.getElementById('pImage').files[0];

            if (!name || !price || !imageFile) {
                alert("Por favor, preencha todos os campos e selecione uma imagem.");
                return;
            }

            // Converter Imagem para Base64 (Upload real sem servidor externo)
            const reader = new FileReader();
            reader.onloadend = function() {
                const products = JSON.parse(localStorage.getItem('products') || '[]');
                products.push({
                    id: Date.now().toString(),
                    name: name,
                    price: parseFloat(price),
                    image: reader.result // Aqui salva a string da imagem
                });
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
                
                // Limpar campos
                document.getElementById('pName').value = '';
                document.getElementById('pPrice').value = '';
                document.getElementById('pImage').value = '';
            }
            reader.readAsDataURL(imageFile);
        }

        function removeProduct(id) {
            let products = JSON.parse(localStorage.getItem('products') || '[]');
            products = products.filter(p => p.id !== id);
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
        }

        function renderProducts() {
            const list = document.getElementById('productList');
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            
            list.innerHTML = products.map(p => `
                <div class="flex items-center justify-between bg-white border border-[#E5E1DB] p-4 group">
                    <div class="flex items-center space-x-4">
                        <img src="${p.image}" class="w-12 h-12 object-cover border border-[#FDFBF7]">
                        <div>
                            <p class="font-serif text-sm">${p.name}</p>
                            <p class="text-xs text-[#8C857B]">R$ ${p.price.toFixed(2)}</p>
                        </div>
                    </div>
                    <button onclick="removeProduct('${p.id}')" class="text-xs text-red-400 opacity-0 group-hover:opacity-100 transition uppercase tracking-widest">Excluir</button>
                </div>
            `).join('');
        }

        renderProducts();
    </script>
</body>
</html>
