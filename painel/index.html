<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Administrativo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-100 p-4 max-w-3xl mx-auto">

<h1 class="text-2xl font-serif mb-4">Painel Administrativo</h1>

<!-- CONFIGURA√á√ïES DA LOJA -->
<section class="bg-white p-4 mb-6 border">
<h2 class="font-medium mb-2">Configura√ß√µes da Loja</h2>

<input class="border p-2 w-full mb-2" placeholder="Nome da Loja"
oninput="save('storeName',this.value)">

<input class="border p-2 w-full mb-2" placeholder="WhatsApp da Loja"
oninput="save('storePhone',this.value)">

<input class="border p-2 w-full mb-2" placeholder="Desconto PIX (%)"
oninput="save('pixDiscount',this.value)">

<input class="border p-2 w-full mb-2" placeholder="Parcelas no cart√£o (ex: 3,6,10)"
oninput="save('maxInstallments',this.value)">
</section>

<!-- CADASTRO DE PRODUTO -->
<section class="bg-white p-4 mb-6 border">
<h2 class="font-medium mb-2">Cadastrar Produto</h2>

<input id="pName" class="border p-2 w-full mb-2" placeholder="Nome">
<input id="pPrice" class="border p-2 w-full mb-2" placeholder="Pre√ßo">
<input id="pImage" class="border p-2 w-full mb-2" placeholder="URL da imagem">

<button onclick="addProduct()"
class="bg-black text-white px-4 py-2">
Adicionar Produto
</button>
</section>

<!-- PRODUTOS CADASTRADOS -->
<section class="bg-white p-4 mb-6 border">
<h2 class="font-medium mb-4">Produtos Cadastrados</h2>
<div id="productList" class="space-y-3"></div>
</section>

<!-- RELAT√ìRIOS -->
<section class="bg-white p-4 border">
<h2 class="font-medium mb-2">Relat√≥rio de Vendas</h2>

<button onclick="printReport()"
class="bg-black text-white px-4 py-2">
Gerar / Imprimir PDF
</button>

<div id="report" class="mt-4 text-sm"></div>
</section>

<script>
function save(k,v){ localStorage.setItem(k,v) }

let products = JSON.parse(localStorage.getItem("products")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function addProduct(){
  products.push({
    id: Date.now().toString(),
    name: pName.value,
    price: Number(pPrice.value),
    image: pImage.value
  });
  localStorage.setItem("products", JSON.stringify(products));
  location.reload();
}

function renderProducts(){
  productList.innerHTML = "";
  products.forEach((p,i)=>{
    productList.innerHTML += `
    <div class="border p-3 flex justify-between">
      <div>
        <p class="font-medium">${p.name}</p>
        <p class="text-sm">R$ ${p.price}</p>
      </div>
      <div class="space-x-2">
        <button onclick="edit(${i})">‚úèÔ∏è</button>
        <button onclick="del(${i})">üóëÔ∏è</button>
      </div>
    </div>`;
  });
}

function edit(i){
  const p = products[i];
  const n = prompt("Nome", p.name);
  const pr = prompt("Pre√ßo", p.price);
  if(n && pr){
    p.name = n;
    p.price = Number(pr);
    localStorage.setItem("products", JSON.stringify(products));
    renderProducts();
  }
}

function del(i){
  if(confirm("Excluir produto?")){
    products.splice(i,1);
    localStorage.setItem("products", JSON.stringify(products));
    renderProducts();
  }
}

function printReport(){
  let html = "<h2>Relat√≥rio de Vendas</h2>";
  let total = 0;

  orders.forEach(o=>{
    html += `<p>${o.date} - R$ ${o.total}</p>`;
    total += o.total;
  });

  html += `<strong>Total Geral: R$ ${total}</strong>`;
  report.innerHTML = html;
  window.print();
}

renderProducts();
</script>

</body>
</html>

