<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Painel Administrativo • Marcinha Semijoias</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

    <style>
        body { background:#0b0b0b; color:#eee; font-family:Inter,Arial; margin:0; }
        nav button.active { border-bottom:2px solid #caa85c; color:#caa85c; }
        section { display:none; min-height:300px; }
        section.active { display:block; }
        input, select, textarea {
            background:#111;
            border:1px solid #333;
            padding:8px;
            width:100%;
            margin-bottom:8px;
            color:#fff;
            outline:none;
            border-radius:6px;
        }
        button { cursor:pointer; }
        #mainModal.active { display:flex; }
        .custom-scroll::-webkit-scrollbar { width:4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background:#caa85c; border-radius:10px; }

        #print-area { display:none; }
        @media print {
            @page { size:A4; margin:10mm; }
            body * { visibility:hidden; }
            #print-area, #print-area * { visibility:visible; }
            #print-area {
                position:absolute;
                left:0; top:0;
                width:100%;
                display:block;
                background:#fff;
                color:#000;
            }
        }
    </style>
</head>

<body>

<nav class="flex gap-6 p-4 border-b border-neutral-800">
    <button onclick="openTab('produtos')" class="tab-btn active">Produtos</button>
    <button onclick="openTab('categorias')" class="tab-btn">Categorias</button>
    <button onclick="openTab('pedidos')" class="tab-btn">Pedidos</button>
    <button onclick="openTab('config')" class="tab-btn">Configurações</button>
</nav>

<main class="p-6 max-w-6xl mx-auto">

<!-- PRODUTOS -->
<section id="produtos" class="active">
    <h2 class="text-xl mb-4">Produtos</h2>
    <button onclick="novoProduto()" class="bg-[#caa85c] text-black px-4 py-2 rounded mb-4">
        + Novo Produto
    </button>
    <div id="listaProdutos" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
</section>

<!-- CATEGORIAS -->
<section id="categorias">
    <h2 class="text-xl mb-4">Categorias</h2>
    <input id="novaCategoria" placeholder="Nova categoria">
    <button onclick="addCategoria()" class="bg-[#caa85c] text-black px-4 py-2 rounded">
        Adicionar
    </button>
    <ul id="listaCategorias" class="mt-4"></ul>
</section>

<!-- PEDIDOS -->
<section id="pedidos">
    <h2 class="text-xl mb-4">Pedidos</h2>
    <div id="listaPedidos" class="space-y-4"></div>
</section>

<!-- CONFIG -->
<section id="config">
    <h2 class="text-xl mb-4">Configurações da Loja</h2>
    <input id="cfgWhatsapp" placeholder="WhatsApp da Loja">
    <input id="cfgDescPix" placeholder="Desconto Pix (%)">
    <input id="cfgParcelas" placeholder="Parcelas no Cartão">
    <button onclick="salvarConfig()" class="bg-[#caa85c] text-black px-4 py-2 rounded">
        Salvar Configurações
    </button>
</section>

</main>

<!-- MODAL PRODUTO -->
<div id="mainModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center">
    <div class="bg-[#111] p-6 rounded w-full max-w-md">
        <h3 class="mb-4">Produto</h3>
        <input id="pNome" placeholder="Nome">
        <input id="pPreco" placeholder="Preço">
        <input id="pImagem" placeholder="URL da Imagem">
        <select id="pCategoria"></select>
        <button onclick="salvarProduto()" class="bg-[#caa85c] text-black px-4 py-2 rounded w-full">
            Salvar
        </button>
        <button onclick="fecharModal()" class="mt-2 text-sm text-gray-400 w-full">
            Cancelar
        </button>
    </div>
</div>

<script>
/* ============================
   FIREBASE • MARCINHA SEMIJOIAS
   ============================ */
const firebaseConfig = {
  apiKey: "AIzaSyAQMdBkCMssdrtM4q3btyTrVyO940WkJK0",
  authDomain: "marcinha-semijoias-ee0c0.firebaseapp.com",
  databaseURL: "https://marcinha-semijoias-ee0c0-default-rtdb.firebaseio.com",
  projectId: "marcinha-semijoias-ee0c0",
  storageBucket: "marcinha-semijoias-ee0c0.firebasestorage.app",
  messagingSenderId: "846120624573",
  appId: "1:846120624573:web:7aa82e2a3df66c2e7d32d4",
  measurementId: "G-WY7Q8CF754"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ====== LÓGICA ORIGINAL (INALTERADA) ====== */
let produtoEditando = null;

function openTab(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

function novoProduto() {
    produtoEditando = null;
    document.getElementById('mainModal').classList.add('active');
}

function fecharModal() {
    document.getElementById('mainModal').classList.remove('active');
}

function salvarProduto() {
    const data = {
        name: pNome.value,
        price: parseFloat(pPreco.value),
        image: pImagem.value,
        category: pCategoria.value
    };
    if (produtoEditando) {
        db.ref('products/' + produtoEditando).set(data);
    } else {
        db.ref('products').push(data);
    }
    fecharModal();
}

function addCategoria() {
    const nome = novaCategoria.value;
    if (!nome) return;
    db.ref('categories').push(nome);
    novaCategoria.value = '';
}

function salvarConfig() {
    db.ref('settings/empresa').set({
        whats: cfgWhatsapp.value,
        descPix: cfgDescPix.value,
        parcelas: cfgParcelas.value
    });
    alert('Configurações salvas');
}
</script>

</body>
</html>
