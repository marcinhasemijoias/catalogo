<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Admin | Marcinha Semijoias</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Cinzel:wght@400;700&display=swap');
body { font-family: 'Inter', sans-serif; background:#F8F6F2; }
.font-serif { font-family:'Cinzel', serif; }
.tab-content{display:none}
.tab-content.active{display:block}
.text-gold{color:#A68966}
.border-gold{border-color:#A68966}
</style>
</head>

<body>

<header class="bg-white border-b py-6 px-8 flex justify-between sticky top-0 z-50">
  <div>
    <h1 class="font-serif text-xl tracking-[0.2em] text-gold">Marcinha Semijoias</h1>
    <p class="text-[9px] uppercase tracking-widest text-gray-400 font-bold">Painel Administrativo</p>
  </div>
  <nav class="flex gap-8 text-[10px] uppercase font-bold tracking-widest">
    <a onclick="showTab('vendas')" id="nav-vendas" class="text-gold border-b-2 border-gold pb-1 cursor-pointer">Vendas</a>
    <a onclick="showTab('produtos')" id="nav-produtos" class="text-gray-400 hover:text-gold cursor-pointer">Produtos</a>
    <a onclick="showTab('config')" id="nav-config" class="text-gray-400 hover:text-gold cursor-pointer">Config</a>
  </nav>
</header>

<main class="max-w-5xl mx-auto p-8">

<!-- VENDAS -->
<div id="vendas" class="tab-content active">
  <h2 class="font-serif text-2xl mb-6 border-b border-gold pb-2">Pedidos</h2>
  <div id="ordersList" class="grid gap-4"></div>
</div>

<!-- PRODUTOS -->
<div id="produtos" class="tab-content">
  <div class="flex justify-between border-b border-gold pb-4 mb-6">
    <h2 class="font-serif text-2xl">Cadastrar Joia</h2>
    <button onclick="saveProduct()" class="bg-black text-white px-8 py-3 text-[10px] uppercase font-bold tracking-widest hover:bg-gold">
      Salvar
    </button>
  </div>

  <div class="grid md:grid-cols-2 gap-6 bg-white p-6 border">
    <div class="space-y-4">
      <input id="p-name" placeholder="Nome" class="w-full border p-3 text-sm">
      <input id="p-price" type="number" placeholder="Preço" class="w-full border p-3 text-sm">
      <input id="p-stock" type="number" placeholder="Estoque" class="w-full border p-3 text-sm">
    </div>
    <div class="space-y-4">
      <input id="p-image" placeholder="URL da Imagem" class="w-full border p-3 text-sm">
      <input id="p-sku" placeholder="SKU" class="w-full border p-3 text-sm">
      <select id="p-category" class="w-full border p-3 text-sm">
        <option>Brincos</option><option>Colares</option><option>Pulseiras</option><option>Aneis</option>
      </select>
    </div>
  </div>
</div>

<!-- CONFIG -->
<div id="config" class="tab-content">
  <h2 class="font-serif text-2xl mb-6 border-b border-gold pb-2">Configurações</h2>
  <div class="bg-white p-6 border max-w-xs space-y-4">
    <input id="conf-pix" type="number" placeholder="% PIX" class="w-full border p-3 text-sm">
    <input id="conf-parcelas" type="number" placeholder="Parcelas" class="w-full border p-3 text-sm">
    <button onclick="updateSettings()" class="w-full bg-gold text-white py-3 text-[10px] uppercase font-bold tracking-widest">
      Salvar
    </button>
  </div>
</div>

</main>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD5RdWTYOnaTov7VtM9ZGenUpFYSZVGoPs",
  authDomain: "marcinha-semijoias.firebaseapp.com",
  databaseURL: "https://marcinha-semijoias-default-rtdb.firebaseio.com",
  projectId: "marcinha-semijoias",
  storageBucket: "marcinha-semijoias.firebasestorage.app",
  messagingSenderId: "830107812924",
  appId: "1:830107812924:web:1ee54d9b875514e48eef39"
};

if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function showTab(id){
  document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

db.ref('orders').on('value',snap=>{
  const list=document.getElementById('ordersList');
  list.innerHTML='';
  const data=snap.val();
  if(!data){list.innerHTML='<p class="text-gray-400">Sem pedidos</p>';return;}
  Object.keys(data).reverse().forEach(id=>{
    const o=data[id];
    list.innerHTML+=`
      <div class="bg-white border p-4 flex justify-between">
        <div>
          <p class="text-[9px] text-gold">${o.date}</p>
          <strong class="text-xs uppercase">${o.customerName}</strong>
          <p class="text-[10px]">R$ ${o.total}</p>
        </div>
        <button onclick="db.ref('orders/${id}').remove()" class="text-red-400 text-[9px] uppercase">Excluir</button>
      </div>`;
  });
});

function saveProduct(){
  db.ref('products').push({
    name:p-name.value,
    price:+p-price.value,
    stock:+p-stock.value,
    image:p-image.value,
    sku:p-sku.value,
    category:p-category.value
  }).then(()=>location.reload());
}

function updateSettings(){
  db.ref('settings').set({
    pixDiscount:+conf-pix.value,
    installments:+conf-parcelas.value
  }).then(()=>alert('Salvo'));
}

db.ref('settings').on('value',s=>{
  if(!s.val())return;
  conf-pix.value=s.val().pixDiscount||'';
  conf-parcelas.value=s.val().installments||'';
});
</script>

</body>
</html>
