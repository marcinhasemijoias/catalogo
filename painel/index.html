<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Admin | Marcinha Semijoias</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      margin: 0;
      font-family: "Georgia", serif;
      background: #faf7f2;
      color: #333;
    }

    header {
      padding: 20px 40px;
      border-bottom: 1px solid #d6b48c;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      font-weight: normal;
      letter-spacing: 2px;
    }

    nav a {
      margin-left: 20px;
      cursor: pointer;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 2px;
      color: #b48b5a;
      text-decoration: none;
      border-bottom: 2px solid transparent;
      padding-bottom: 4px;
    }

    nav a.active {
      border-color: #b48b5a;
    }

    main {
      padding: 40px;
      max-width: 1000px;
      margin: auto;
    }

    h2 {
      font-weight: normal;
      letter-spacing: 1px;
      border-bottom: 1px solid #d6b48c;
      padding-bottom: 10px;
    }

    .tab {
      display: none;
    }

    .tab.active {
      display: block;
    }

    label {
      display: block;
      margin-top: 20px;
      font-size: 14px;
    }

    input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      margin-top: 30px;
      padding: 12px 30px;
      background: #b48b5a;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      letter-spacing: 1px;
    }

    button:hover {
      opacity: 0.9;
    }

    .info {
      margin-top: 20px;
      font-size: 13px;
      color: #666;
    }
  </style>
</head>

<body>

<header>
  <h1>Marcinha Semijoias</h1>
  <nav>
    <a onclick="showTab('vendas')" class="active">Vendas</a>
    <a onclick="showTab('produtos')">Produtos</a>
    <a onclick="showTab('config')">Config</a>
  </nav>
</header>

<main>

  <!-- VENDAS -->
  <section id="vendas" class="tab active">
    <h2>Pedidos</h2>
    <p class="info">Os pedidos aparecerão aqui automaticamente.</p>
  </section>

  <!-- PRODUTOS -->
  <section id="produtos" class="tab">
    <h2>Produtos</h2>
    <p class="info">Cadastro e edição de produtos (próximo passo).</p>
  </section>

  <!-- CONFIG -->
  <section id="config" class="tab">
    <h2>Configurações da Loja</h2>

    <label>
      Nome da Loja
      <input id="cfgNome" placeholder="Ex: Marcinha Semijoias" />
    </label>

    <label>
      WhatsApp (somente números)
      <input id="cfgWhats" placeholder="5599999999999" />
    </label>

    <label>
      Desconto PIX (%)
      <input id="cfgPix" type="number" placeholder="5" />
    </label>

    <label>
      Estoque mínimo (alerta)
      <input id="cfgEstoque" type="number" placeholder="3" />
    </label>

    <button onclick="salvarConfig()">Salvar Configurações</button>

    <p class="info" id="status"></p>
  </section>

</main>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_DOMINIO.firebaseapp.com",
    projectId: "SEU_PROJECT_ID",
    storageBucket: "SEU_BUCKET.appspot.com",
    messagingSenderId: "SEU_SENDER_ID",
    appId: "SEU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.showTab = function(tab){
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));

    document.getElementById(tab).classList.add('active');
    event.target.classList.add('active');
  }

  async function carregarConfig(){
    const ref = doc(db, "config", "loja");
    const snap = await getDoc(ref);

    if(snap.exists()){
      const c = snap.data();
      cfgNome.value = c.nome || "";
      cfgWhats.value = c.whatsapp || "";
      cfgPix.value = c.descontoPix || "";
      cfgEstoque.value = c.estoqueMin || "";
    }
  }

  window.salvarConfig = async function(){
    await setDoc(doc(db, "config", "loja"), {
      nome: cfgNome.value,
      whatsapp: cfgWhats.value,
      descontoPix: Number(cfgPix.value),
      estoqueMin: Number(cfgEstoque.value)
    });

    status.innerText = "Configurações salvas com sucesso ✔";
  }

  carregarConfig();
</script>

</body>
</html>
