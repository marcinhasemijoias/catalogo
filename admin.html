<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Administrativo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/lucide-static/font/lucide.css">
</head>

<body class="bg-[#FDFBF7] text-[#2D2926]">

<header class="bg-white border-b px-6 py-4 flex justify-between items-center">
  <h1 class="text-sm tracking-[0.4em] uppercase">Painel Administrativo</h1>
  <a href="./" class="text-xs text-[#A68966]">Ver Loja</a>
</header>

<main class="max-w-3xl mx-auto p-6 space-y-10 font-sans">

  <!-- CONFIG DA LOJA -->
  <section class="bg-white border p-6 space-y-4">
    <h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">
      Dados da Loja
    </h2>

    <input id="storeName" class="w-full border-b p-2" placeholder="Nome da Loja">
    <input id="storeWhatsapp" class="w-full border-b p-2" placeholder="WhatsApp (5511999999999)">
    <input id="pixDiscount" type="number" class="w-full border-b p-2" placeholder="Desconto PIX (%)">
    <input id="maxInstallments" type="number" class="w-full border-b p-2" placeholder="Parcelas Máx">

    <button onclick="saveStore()" class="bg-black text-white px-4 py-2 text-xs uppercase">
      Salvar Configurações
    </button>
  </section>

  <!-- CADASTRO PRODUTO -->
  <section class="bg-white border p-6 space-y-4">
    <h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">
      Cadastro de Produto
    </h2>

    <input id="prodName" class="w-full border-b p-2" placeholder="Nome do Produto">
    <input id="prodSku" class="w-full border-b p-2" placeholder="SKU">
    <input id="prodPrice" type="number" class="w-full border-b p-2" placeholder="Preço">
    <input id="prodImg" type="file" accept="image/*">

    <button onclick="addProduct()" class="bg-black text-white px-4 py-2 text-xs uppercase">
      Adicionar Produto
    </button>
  </section>

  <!-- LISTA PRODUTOS -->
  <section class="bg-white border p-6 space-y-2">
    <h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">
      Produtos Cadastrados
    </h2>

    <div id="productList"></div>
  </section>

</main>

<script>
/* ===== STORE ===== */
function saveStore(){
  const store = {
    name: storeName.value,
    whatsapp: storeWhatsapp.value,
    pixDiscount: Number(pixDiscount.value)/100,
    maxInstallments: Number(maxInstallments.value)
  };
  localStorage.setItem('luxury_config', JSON.stringify(store));
  alert('Configurações salvas');
}

/* ===== PRODUTOS ===== */
function addProduct(){
  const reader = new FileReader();
  reader.onload = () => {
    const products = JSON.parse(localStorage.getItem('luxury_products') || '[]');
    products.push({
      id: Date.now(),
      name: prodName.value,
      sku: prodSku.value,
      price: Number(prodPrice.value),
      image: reader.result
    });
    localStorage.setItem('luxury_products', JSON.stringify(products));
    renderProducts();
  };
  reader.readAsDataURL(prodImg.files[0]);
}

function renderProducts(){
  const products = JSON.parse(localStorage.getItem('luxury_products') || '[]');
  productList.innerHTML = '';
  products.forEach(p => {
    productList.innerHTML += `
      <div class="flex justify-between border-b py-2 text-xs">
        <span>${p.name} (${p.sku})</span>
        <button onclick="deleteProduct(${p.id})" class="text-red-500">Excluir</button>
      </div>
    `;
  });
}

function deleteProduct(id){
  const products = JSON.parse(localStorage.getItem('luxury_products') || '[]')
    .filter(p => p.id !== id);
  localStorage.setItem('luxury_products', JSON.stringify(products));
  renderProducts();
}

/* INIT */
renderProducts();
</script>

</body>
</html>
