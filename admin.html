<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel Administrativo - Abella Joias</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; background-color: #FDFBF7; }
    .font-serif { font-family: 'Playfair Display', serif; }
    .animate-in { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    input, select { border: 1px solid #ccc; border-radius: 4px; padding: 0.5rem; }
  </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

const Icons = {
  Trash2: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
};

function Admin() {
  const [products, setProducts] = useState([]);
  const [storeConfig, setStoreConfig] = useState({ name:'Abella Joias', whatsapp:'', pixDiscount:0.10, cardInstallments:3 });
  const [form, setForm] = useState({ id:null, name:'', price:'', stock:'', image:'' });

  useEffect(()=>{
    const savedProducts = JSON.parse(localStorage.getItem('products')||'[]');
    const savedConfig = JSON.parse(localStorage.getItem('storeConfig')||'null');
    if(savedProducts.length) setProducts(savedProducts);
    if(savedConfig) setStoreConfig(savedConfig);
  },[]);

  const saveConfig = ()=>{
    localStorage.setItem('storeConfig', JSON.stringify(storeConfig));
    alert('Configurações salvas!');
  };

  const saveProduct = ()=>{
    if(!form.name || !form.price) return alert('Preencha nome e preço');
    let updated;
    if(form.id!==null){
      updated = products.map(p=>p.id===form.id?{...form, price:Number(form.price), stock:Number(form.stock)}:p);
    } else {
      updated = [...products,{...form,id:Date.now(), price:Number(form.price), stock:Number(form.stock)}];
    }
    setProducts(updated);
    localStorage.setItem('products', JSON.stringify(updated));
    setForm({ id:null, name:'', price:'', stock:'', image:'' });
  };

  const editProduct = p=>{
    setForm(p);
  };

  const deleteProduct = id=>{
    const updated = products.filter(p=>p.id!==id);
    setProducts(updated);
    localStorage.setItem('products', JSON.stringify(updated));
  };

  return (
    <div className="max-w-3xl mx-auto p-8 space-y-10">
      <h1 className="text-3xl font-serif italic text-gray-800 border-b pb-4">Painel Administrativo</h1>

      {/* Configurações */}
      <section className="space-y-4">
        <h2 className="text-xl font-serif">Configurações da Loja</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input placeholder="Nome da Loja" value={storeConfig.name} onChange={e=>setStoreConfig({...storeConfig,name:e.target.value})}/>
          <input placeholder="WhatsApp (com DDD)" value={storeConfig.whatsapp} onChange={e=>setStoreConfig({...storeConfig,whatsapp:e.target.value})}/>
          <input type="number" step="0.01" placeholder="Desconto PIX (%)" value={storeConfig.pixDiscount*100} onChange={e=>setStoreConfig({...storeConfig,pixDiscount:Number(e.target.value)/100})}/>
          <input type="number" placeholder="Parcelas Cartão" value={storeConfig.cardInstallments} onChange={e=>setStoreConfig({...storeConfig,cardInstallments:Number(e.target.value)})}/>
        </div>
        <button onClick={saveConfig} className="bg-[#A68966] text-white px-6 py-2 rounded-sm">Salvar Configurações</button>
      </section>

      {/* Formulário Produto */}
      <section className="space-y-4">
        <h2 className="text-xl font-serif">Adicionar / Editar Produto</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input placeholder="Nome do Produto" value={form.name} onChange={e=>setForm({...form,name:e.target.value})}/>
          <input type="number" placeholder="Preço" value={form.price} onChange={e=>setForm({...form,price:e.target.value})}/>
          <input type="number" placeholder="Estoque" value={form.stock} onChange={e=>setForm({...form,stock:e.target.value})}/>
          <input placeholder="URL Imagem" value={form.image} onChange={e=>setForm({...form,image:e.target.value})}/>
        </div>
        <button onClick={saveProduct} className="bg-[#2D2926] text-white px-6 py-2 rounded-sm">{form.id!==null?'Salvar Alterações':'Adicionar Produto'}</button>
      </section>

      {/* Lista de Produtos */}
      <section className="space-y-4">
        <h2 className="text-xl font-serif">Produtos</h2>
        {products.length===0 && <p className="italic text-gray-500">Nenhum produto cadastrado.</p>}
        <div className="space-y-3">
          {products.map(p=>(
            <div key={p.id} className="flex justify-between items-center border p-3 rounded-sm shadow-sm animate-in">
              <div>
                <p className="font-bold">{p.name}</p>
                <p>R$ {p.price.toFixed(2)} | Estoque: {p.stock} | Parcelas: {storeConfig.cardInstallments}x</p>
              </div>
              <div className="flex gap-2">
                <button onClick={()=>editProduct(p)} className="bg-yellow-500 text-white px-3 py-1 rounded-sm">Editar</button>
                <button onClick={()=>deleteProduct(p.id)} className="bg-red-500 text-white px-3 py-1 rounded-sm"><Icons.Trash2 /></button>
              </div>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<Admin />);
</script>
</body>
</html>
