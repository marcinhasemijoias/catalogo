<!-- ARQUIVO: admin.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel Administrativo</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-[#FDFBF7]">

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

function Admin() {
  const [store, setStore] = useState({ name:'Nome da Loja', whatsapp:'', pixDiscount:0, maxInstallments:12 });
  const [products, setProducts] = useState([]);
  const [orders, setOrders] = useState([]);

  const [newProduct, setNewProduct] = useState({ name:'', sku:'', price:'', image:'' });

  useEffect(()=>{
    const s = localStorage.getItem('store');
    const p = localStorage.getItem('products');
    const o = localStorage.getItem('orders');
    if (s) setStore(JSON.parse(s));
    if (p) setProducts(JSON.parse(p));
    if (o) setOrders(JSON.parse(o));
  },[]);

  const saveStore = (data)=>{
    setStore(data);
    localStorage.setItem('store', JSON.stringify(data));
  }

  const addProduct = ()=>{
    if(!newProduct.name || !newProduct.price) return;
    const list = [...products, { ...newProduct, id: Date.now(), price: parseFloat(newProduct.price) }];
    setProducts(list);
    localStorage.setItem('products', JSON.stringify(list));
    setNewProduct({ name:'', sku:'', price:'', image:'' });
  }

  const removeProduct = (id)=>{
    const list = products.filter(p=>p.id!==id);
    setProducts(list);
    localStorage.setItem('products', JSON.stringify(list));
  }

  const format = v=>v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});

  return (
    <div className="max-w-3xl mx-auto p-6 space-y-10 font-sans">

      <h1 className="text-center text-xl tracking-widest uppercase">Painel Administrativo</h1>

      {/* CONFIGURAÇÕES DA LOJA */}
      <section className="bg-white border p-6 space-y-4">
        <h2 className="text-xs uppercase tracking-widest text-gray-500">Dados da Empresa</h2>
        <input className="w-full border-b p-2" placeholder="Nome da Loja" value={store.name} onChange={e=>saveStore({...store,name:e.target.value})} />
        <input className="w-full border-b p-2" placeholder="WhatsApp (somente números)" value={store.whatsapp} onChange={e=>saveStore({...store,whatsapp:e.target.value})} />
        <div className="grid grid-cols-2 gap-4">
          <input type="number" className="border p-2" placeholder="Desconto PIX (%)" value={store.pixDiscount} onChange={e=>saveStore({...store,pixDiscount:parseFloat(e.target.value)})} />
          <input type="number" className="border p-2" placeholder="Máx parcelas" value={store.maxInstallments} onChange={e=>saveStore({...store,maxInstallments:parseInt(e.target.value)})} />
        </div>
      </section>

      {/* PRODUTOS */}
      <section className="bg-white border p-6 space-y-4">
        <h2 className="text-xs uppercase tracking-widest text-gray-500">Cadastro de Produtos</h2>
        <input className="w-full border-b p-2" placeholder="Nome" value={newProduct.name} onChange={e=>setNewProduct({...newProduct,name:e.target.value})} />
        <input className="w-full border-b p-2" placeholder="SKU" value={newProduct.sku} onChange={e=>setNewProduct({...newProduct,sku:e.target.value})} />
        <input type="number" className="w-full border-b p-2" placeholder="Preço" value={newProduct.price} onChange={e=>setNewProduct({...newProduct,price:e.target.value})} />
        <input className="w-full border-b p-2" placeholder="URL da Imagem" value={newProduct.image} onChange={e=>setNewProduct({...newProduct,image:e.target.value})} />
        <button onClick={addProduct} className="w-full bg-black text-white py-3 text-xs">Adicionar Produto</button>

        <div className="space-y-2 pt-4">
          {products.map(p=>(
            <div key={p.id} className="flex justify-between items-center border p-3 text-xs">
              <span>{p.name} <span className="text-gray-400">#{p.sku}</span></span>
              <div className="flex gap-4 items-center">
                <span>{format(p.price)}</span>
                <button onClick={()=>removeProduct(p.id)} className="text-red-500">Excluir</button>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* PEDIDOS */}
      <section className="bg-white border p-6 space-y-4">
        <h2 className="text-xs uppercase tracking-widest text-gray-500">Pedidos</h2>
        {orders.length===0 && <p className="text-xs text-gray-400">Nenhum pedido ainda.</p>}
        {orders.map(o=>(
          <div key={o.id} className="border p-3 text-xs flex justify-between">
            <span>{o.customer?.name} • {format(o.total)}</span>
            <button className="text-green-600">WhatsApp</button>
          </div>
        ))}
      </section>

    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<Admin />);
</script>

</body>
</html>
