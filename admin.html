<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Painel Administrativo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#FDFBF7] text-[#2D2926]">

<header class="bg-white border-b px-6 py-4 flex justify-between">
<h1 class="text-sm tracking-[0.4em] uppercase">Painel Administrativo</h1>
<a href="./" class="text-xs text-[#A68966]">Ver Loja</a>
</header>

<main class="max-w-3xl mx-auto p-6 space-y-10">

<section class="bg-white border p-6 space-y-4">
<h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">Dados da Loja</h2>

<input id="storeName" class="w-full border-b p-2" placeholder="Nome da Loja">
<input id="storeWhatsapp" class="w-full border-b p-2" placeholder="WhatsApp (5511999999999)">
<input id="pixDiscount" type="number" class="w-full border-b p-2" placeholder="Desconto PIX (%)">
<input id="maxInstallments" type="number" class="w-full border-b p-2" placeholder="Parcelas Máx">

<button onclick="saveStore()" class="bg-black text-white px-4 py-2 text-xs uppercase">Salvar</button>
</section>

<section class="bg-white border p-6 space-y-4">
<h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">Produto</h2>

<input id="prodName" class="w-full border-b p-2" placeholder="Nome">
<input id="prodSku" class="w-full border-b p-2" placeholder="SKU">
<input id="prodPrice" type="number" class="w-full border-b p-2" placeholder="Preço">
<input id="prodImg" type="file" accept="image/*">

<button onclick="addProduct()" class="bg-black text-white px-4 py-2 text-xs uppercase">Adicionar</button>
</section>

<section class="bg-white border p-6">
<h2 class="text-xs uppercase tracking-widest border-l-2 pl-3 border-[#A68966]">Produtos</h2>
<div id="productList"></div>
</section>

</main>

<script>
const STORE_KEY = 'store_config';
const PRODUCT_KEY = 'store_products';

function saveStore(){
const store = {
name: storeName.value,
whatsapp: storeWhatsapp.value,
pixDiscount: Number(pixDiscount.value),
maxInstallments: Number(maxInstallments.value)
};
localStorage.setItem(STORE_KEY, JSON.stringify(store));
alert('Configurações salvas');
}

function loadStore(){
const data = JSON.parse(localStorage.getItem(STORE_KEY) || '{}');
storeName.value = data.name || '';
storeWhatsapp.value = data.whatsapp || '';
pixDiscount.value = data.pixDiscount || '';
maxInstallments.value = data.maxInstallments || '';
}

function addProduct(){
const reader = new FileReader();
reader.onload = () => {
const products = JSON.parse(localStorage.getItem(PRODUCT_KEY) || '[]');
products.push({
id: Date.now(),
name: prodName.value,
sku: prodSku.value,
price: Number(prodPrice.value),
image: reader.result
});
localStorage.setItem(PRODUCT_KEY, JSON.stringify(products));
renderProducts();
};
reader.readAsDataURL(prodImg.files[0]);
}

function renderProducts(){
const products = JSON.parse(localStorage.getItem(PRODUCT_KEY) || '[]');
productList.innerHTML = '';
products.forEach(p=>{
productList.innerHTML += `
<div class="flex justify-between border-b py-2 text-xs">
<span>${p.name} (${p.sku})</span>
<button onclick="deleteProduct(${p.id})" class="text-red-500">Excluir</button>
</div>`;
});
}

function deleteProduct(id){
const products = JSON.parse(localStorage.getItem(PRODUCT_KEY) || '[]').filter(p=>p.id!==id);
localStorage.setItem(PRODUCT_KEY, JSON.stringify(products));
renderProducts();
}

loadStore();
renderProducts();
</script>
</body>
</html>
